import{aq as Xo,ar as Yo,as as qo,at as Jo,au as Ln,av as Zo,aw as Qo,ax as ea,r as i,a as o,F,ay as ta,az as pt,aA as ht,aB as se,aC as An,s as W,v as j,aD as na,P as je,E as _e,aE as Re,Q as ot,aF as Ce,aG as V,aH as oa,j as x,g as jn,aI as zn,h as ze,aJ as aa,af as Ie,i as le,t as at,aK as sa,aL as ia,aM as ra,aN as ca,aO as la,m as xe,aP as da,aQ as H,aR as ua,aS as mt,aT as ft,aU as de,aV as pa,aW as ha,aX as Ut,aY as ma,aZ as fa,a_ as ga,a$ as ba,b0 as ae,e as X,B as k,T as O,b1 as ue,y as J,b2 as gt,b3 as Bn,b4 as va,C as ne,ae as ya,b5 as Pa,x as Ee,an as bt,z as Nn,b6 as Se,b7 as xa,b8 as fe,u as Wn,c as Be,A as Sa,b9 as Fn,ba as wa,bb as _a,bc as Ca,bd as ke,U as Ia,be as me,bf as Te,bg as Ea,bh as Ne,bi as ka,l as Vn,bj as Ta,bk as Da,bl as Ma,q as Un,bm as Ra,bn as vt,bo as Ht,bp as Oa,bq as yt,br as La,bs as Aa,bt as st,bu as Hn,bv as ja,bw as za,f as Ba,bx as Na,by as Wa,bz as Fa,bA as Va,bB as Ua,K as oe,w as We,bC as Gn,bD as Fe,bE as Kn,a2 as te,M as Ha,bF as Pt,bG as xt,bH as Ga,bI as Ka,bJ as $n,bK as $a,bL as Xa,bM as Xn,bN as Yn,bO as Gt,bP as Ya,bQ as qa,a9 as qn,bR as Ja,bS as Jn,bT as it,bU as Za,bV as Qa,bW as es,bX as Zn,bY as Qn,bZ as ts,b_ as ns,b$ as os,c0 as eo,c1 as as,c2 as ss,c3 as to,c4 as St,c5 as is,c6 as Ze,c7 as rs,c8 as cs,L as ls,N as Kt,c9 as ds,ca as us,cb as ps,cc as Qe,H as hs,cd as rt,ce as ct,cf as no,a5 as ms,cg as fs,ch as gs,ci as bs,cj as vs,ck as ys,cl as Ps,cm as wt,cn as xs,co as Ss,cp as ws,cq as _s,ag as Cs,cr as Is,R as Es,cs as ks,ct as Ts,cu as Ds,cv as lt,cw as oo,cx as Ms,cy as Rs,cz as Os,b as Ls,cA as As,cB as dt,cC as js,cD as zs,D as Bs,cE as et,cF as $t,W as Ns,X as Ws,cG as ao,cH as Fs,cI as Vs,cJ as Us,cK as Hs,cL as tt,cM as Xt,cN as Gs,cO as Yt,cP as Ks}from"./sanity-007085ba.js";import{H as $s,J as Xs}from"./json-inspector-1a795e9b.js";function so(t,e){var n=typeof e=="object";return new Promise(function(s,a){var r=new Xo({next:function(c){s(c),r.unsubscribe()},error:a,complete:function(){n?s(e.defaultValue):a(new Yo)}});t.subscribe(r)})}function Ys(){return qo(function(t,e){var n,s=!1;t.subscribe(Jo(e,function(a){var r=n;n=a,s&&e.next([r,a]),s=!0}))})}var qs=function(t){Ln(e,t);function e(n){var s=t.call(this)||this;return s._value=n,s}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(n){var s=t.prototype._subscribe.call(this,n);return s&&!s.closed&&n.next(this._value),s},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Zo;return this._value},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Qo);function Js(t,e){return function(n){return n.lift(new Zs(t,e))}}var Zs=function(){function t(e,n){this.compare=e,this.keySelector=n}return t.prototype.call=function(e,n){return n.subscribe(new Qs(e,this.compare,this.keySelector))},t}(),Qs=function(t){Ln(e,t);function e(n,s,a){var r=t.call(this,n)||this;return r.keySelector=a,r.hasKey=!1,typeof s=="function"&&(r.compare=s),r}return e.prototype.compare=function(n,s){return n===s},e.prototype._next=function(n){var s;try{var a=this.keySelector;s=a?a(n):n}catch(l){return this.destination.error(l)}var r=!1;if(this.hasKey)try{var c=this.compare;r=c(this.key,s)}catch(l){return this.destination.error(l)}else this.hasKey=!0;r||(this.key=s,this.destination.next(n))},e}(ea);function ei(t,e){var n=i.useCallback(function(){var c=new qs(t),l=c.asObservable().pipe(Js());return[e?l.pipe(e):l,c]},[]),s=i.useRef();s.current||(s.current=n());var a=s.current[0];i.useEffect(function(){if(s.current){var c=s.current,l=c[1];l.next(t)}},[t,s]);var r=i.useRef(!1);return i.useEffect(function(){return r.current&&(s.current||(s.current=n()),r.current=!1),function(){if(s.current){r.current=!0;var c=s.current,l=c[1];l.complete(),s.current=void 0}}},[]),a}var qt,Jt,Zt,Qt,en,tn,nn,on,an,sn,rn,cn,ln,dn,un,pn,hn,mn,fn,gn,bn,vn,yn,Pn,xn,Sn;function B(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function io(t){let{children:e,ms:n=0}=t;const[s,a]=i.useState(n<=0);return i.useEffect(()=>{if(n<=0)return;const r=setTimeout(()=>a(!0),n);return()=>{clearTimeout(r)}},[n]),!s||!e?o(F,{}):typeof e=="function"?e():e}const _t=t=>{const{actions:e,children:n,actionProps:s,onActionComplete:a}=t;return o(Hn,{onReset:a,hooks:e,args:s,children:n})},ti=t=>{const{badges:e,children:n,badgeProps:s,...a}=t;return o(Hn,{...a,hooks:e,args:s,children:n})},ni=[];function oi(t){const{children:e,flatIndex:n,index:s,params:a,payload:r,siblingIndex:c}=t,{navigate:l,navigateIntent:d}=pt(),u=ht(),h=i.useMemo(()=>(u==null?void 0:u.panes)||ni,[u==null?void 0:u.panes]),p=s-1,f=i.useCallback(b=>{const g=h[p]||[],P=g[c],S=b(g,P),w=[...h.slice(0,p),S,...h.slice(p+1)],C={...u||{},panes:w};return setTimeout(()=>l(C),0),C},[p,l,h,u,c]),m=i.useCallback(b=>{f((g,P)=>[...g.slice(0,c),{...P,payload:b},...g.slice(c+1)])},[f,c]),v=i.useCallback(b=>{f((g,P)=>[...g.slice(0,c),{...P,params:b},...g.slice(c+1)])},[f,c]),y=i.useCallback(b=>{let{id:g,parentRefPath:P,type:S,template:w}=b;l({panes:[...h.slice(0,p+1),[{id:g,params:{template:w.id,parentRefPath:ja(P),type:S},payload:w.params}]]})},[p,l,h]),_=i.useMemo(()=>({index:n,groupIndex:p,siblingIndex:c,payload:r,params:a,hasGroupSiblings:h[p]?h[p].length>1:!1,groupLength:h[p]?h[p].length:0,routerPanesState:h,ChildLink:za,BackLink:Ba,ReferenceChildLink:Na,handleEditReference:y,ParameterizedLink:Wa,replaceCurrent:function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};f(()=>[{id:b.id||"",payload:b.payload,params:b.params||{}}])},closeCurrent:()=>{f((b,g)=>b.length>1?b.filter(P=>P!==g):b)},duplicateCurrent:b=>{f((g,P)=>{const S={...P,payload:(b==null?void 0:b.payload)||P.payload,params:(b==null?void 0:b.params)||P.params};return[...g.slice(0,c),S,...g.slice(c)]})},setView:b=>{const g=mt(a,"view");return v(b?{...g,view:b}:g)},setParams:v,setPayload:m,navigateIntent:d}),[n,p,y,f,d,a,r,h,v,m,c]);return o(Fa.Provider,{value:_,children:e})}function ai(t,e,n,s){var a,r;const c={flex:t.left.flex+t.right.flex,width:t.left.width+t.right.width},l=(a=e.minWidth)!=null?a:dt,d=(r=n.minWidth)!=null?r:dt,u=Math.min(e.maxWidth||1/0,c.width-d),h=Math.min(n.maxWidth||1/0,c.width-l);let p=l-t.left.width;const f=t.right.width-h;p<f&&(p=f);let m=t.right.width-d;const v=u-t.left.width;m>v&&(m=v);const y=Math.min(Math.max(s,p),m),_=t.left.width+y,b=t.right.width-y,g=_/c.width*c.flex,P=b/c.width*c.flex;return{leftFlex:g,leftW:_,rightFlex:P,rightW:b}}function si(t,e){const n=[];let s=e;for(;s!==t;){const a=s.parentElement;if(!a)return n;const c=Array.from(a.childNodes).indexOf(s);if(n.unshift(c),a===t)return n;s=a}return n}const wn=[];function ii(t,e){const n=new WeakMap;for(const a of e)n.set(a,si(t,a));const s=(a,r)=>{const c=n.get(a)||wn,l=n.get(r)||wn,d=Math.max(c.length,l.length);for(let u=0;u<d;u+=1){const h=c[u]||-1,p=l[u]||-1;if(h!==p)return h-p}return 0};e.sort(s)}function ri(){const t=[],e=[],n=new WeakMap,s=new Set,a={};let r=null,c=0,l=null,d=new Map,u=!1;function h(g){s.add(g),l===g&&(l=null),b()}function p(g){s.delete(g),l=g,b()}function f(g,P){return n.set(g,{...P,original:P}),e.push(g),r&&ii(r,e),p(g),()=>{const S=e.indexOf(g);S>-1&&e.splice(S,1),n.delete(g),b()}}function m(g,P,S){var w,C,D,I;const T=e.indexOf(P),L=n.get(P);if(!L)return;const M=e[T+1],N=n.get(M);if(N){if(g==="start"&&(u=!0,a.left={element:P,flex:L.flex||1,width:P.offsetWidth},a.right={element:M,flex:N.flex||1,width:M.offsetWidth},b()),g==="move"&&a.left&&a.right){d=new Map;const{leftW:R,rightW:z,leftFlex:G,rightFlex:Y}=ai(a,L,N,S);d.set(P,{flex:G,width:R}),d.set(M,{flex:Y,width:z}),b()}if(g==="end"){u=!1;const R=d.get(P),z=d.get(M);n.set(P,{...L,currentMinWidth:0,currentMaxWidth:(w=L.maxWidth)!=null?w:1/0,flex:(C=R==null?void 0:R.flex)!=null?C:L.flex}),n.set(M,{...N,currentMinWidth:0,currentMaxWidth:(D=L.maxWidth)!=null?D:1/0,flex:(I=z==null?void 0:z.flex)!=null?I:N.flex}),d=new Map,delete a.left,delete a.right,b()}}}function v(g){r=g}function y(g){c=g,b()}function _(g){return t.push(g),()=>{const P=t.push(g);P>-1&&t.splice(P,1)}}return{collapse:h,expand:p,mount:f,resize:m,setRootElement:v,setRootWidth:y,subscribe:_};function b(){var g,P,S,w;if(!c)return;const C=[];for(const R of e)R!==l&&C.unshift(R);l&&C.unshift(l);const D=new WeakMap,I=C.length,T=C[0],L=(I-1)*tt;let M=c-L;for(const R of C){const z=n.get(R);if(!z)continue;const G=z.currentMinWidth||z.minWidth||dt,Y=R===T,A=s.has(R),q=G>M,Q=Y?!1:A||q,ee=d.get(R);D.set(R,{element:R,collapsed:Q,currentMinWidth:(g=ee==null?void 0:ee.width)!=null?g:z.currentMinWidth,currentMaxWidth:(P=ee==null?void 0:ee.width)!=null?P:z.currentMaxWidth,flex:(w=(S=ee==null?void 0:ee.flex)!=null?S:z.flex)!=null?w:1}),Q?M-=tt:M-=G-tt}const N=[];for(const R of e){const z=D.get(R);z&&N.push(z)}for(const R of t)R({expandedElement:l||e[e.length-1]||null,panes:N,resizing:u})}}function ci(t){const{children:e,minWidth:n,onCollapse:s,onExpand:a,...r}=t,c=i.useMemo(()=>ri(),[]),[l,d]=i.useState(null),u=Ne(l),h=(u==null?void 0:u.width)||0,p=h===void 0||!n?void 0:h<n,[f,m]=i.useState({expandedElement:null,panes:[],resizing:!1});i.useEffect(()=>c.setRootElement(l),[c,l]),i.useEffect(()=>c.setRootWidth(h),[c,h]),i.useEffect(()=>c.subscribe(m),[c]),i.useEffect(()=>{p!==void 0&&(p&&s&&s(),!p&&a&&a())},[p,s,a]);const v=i.useMemo(()=>({collapse:c.collapse,collapsed:p,expand:c.expand,expandedElement:f.expandedElement,mount:c.mount,panes:f.panes,resize:c.resize,resizing:f.resizing}),[p,c,f.expandedElement,f.panes,f.resizing]);return o(Va.Provider,{value:v,children:o(Ua,{"data-ui":"PaneLayout",...r,"data-collapsed":p?"":void 0,"data-resizing":f.resizing?"":void 0,"data-mounted":h?"":void 0,ref:d,children:e})})}class ge extends Error{constructor(e){let{message:n,context:s,helpId:a,cause:r}=e;super(n),this.context=s,this.helpId=a,this.cause=r}}const _n=new WeakMap;function Ve(t){const e=_n.get(t);if(e)return e;const n=Vs();return _n.set(t,n),n}const Cn=new WeakMap;function ro(t,e){const n=Cn.get(t)||new Map;if(n){const r=n.get(e);if(r)return r}const s=t[e];if(typeof s!="function")throw new Error("Expected property `".concat(e,"` to be a function but got ").concat(typeof s," instead."));const a=s.bind(t);return n.set(e,a),Cn.set(t,n),a}const li=t=>!!t&&typeof(t==null?void 0:t.then)=="function",di=t=>se(t)?typeof t.serialize=="function":!1,ui=t=>(e,n,s)=>{try{return t(e,n,s)}catch(a){throw a instanceof ge?a:new ge({message:typeof(a==null?void 0:a.message)=="string"?a.message:"",context:n,cause:a})}},pi=t=>function(){return t(...arguments).pipe(Us(1),Hs())};function co(t){const e=ui(pi(t((n,s,a)=>{if(!n)throw new ge({message:"Pane returned no child",context:s,helpId:"structure-item-returned-no-child"});return li(n)||js(n)?Kn(n).pipe(Fe(r=>e(r,s,a))):di(n)?e(n.serialize(s),s,a):typeof n=="function"?e(n(s.id,s),s,a):te(n)})));return e}async function hi(t){const e=new Map,s=co(d=>(u,h,p)=>{const f=u&&"".concat(Ve(u),"-").concat(h.path.join("__")),m=f&&e.get(f);if(m)return m;const v=d(u,h,p);return f&&e.set(f,v),v}),a=[[{id:"__edit__".concat(t.params.id),params:{...mt(t.params,["id"]),type:t.params.type},payload:t.payload}]];async function r(d){let{currentId:u,flatIndex:h,intent:p,params:f,parent:m,path:v,payload:y,unresolvedPane:_,levelIndex:b,structureContext:g}=d;var P;if(!_)return[];const{id:S,type:w,...C}=f,I=await so(s(_,{id:u,splitIndex:0,parent:m,path:v,index:h,params:{},payload:void 0,structureContext:g},h));return I.type==="document"&&I.id===S?[{panes:[...v.slice(0,v.length-1).map(T=>[{id:T}]),[{id:S,params:C,payload:y}]],depthIndex:v.length,levelIndex:b}]:(P=I.canHandleIntent)!=null&&P.call(I,p,f,{pane:I,index:h})||I.type==="documentList"&&I.schemaTypeName===w&&I.options.filter==="_type == $type"?[{panes:[...v.map(T=>[{id:T}]),[{id:f.id,params:C,payload:y}]],depthIndex:v.length,levelIndex:b}]:I.type==="list"&&I.child&&I.items?(await Promise.all(I.items.map((T,L)=>T.type==="divider"?Promise.resolve([]):r({currentId:T._id||T.id,flatIndex:h+1,intent:p,params:f,parent:I,path:[...v,T.id],payload:y,unresolvedPane:typeof I.child=="function"?ro(I,"child"):I.child,levelIndex:L,structureContext:g})))).flat():[]}const l=(await r({currentId:"root",flatIndex:0,levelIndex:0,intent:t.intent,params:t.params,parent:null,path:[],payload:t.payload,unresolvedPane:t.rootPaneNode,structureContext:t.structureContext})).sort((d,u)=>d.depthIndex===u.depthIndex?d.levelIndex-u.levelIndex:d.depthIndex-u.depthIndex)[0];return l?l.panes:a}function ie(){const t=i.useContext(ta);if(!t)throw new Error("DeskTool: missing context value");return t}const mi=(t,e)=>{const n=t.replace(/^__edit__/,""),{params:s,payload:a,structureContext:{resolveDocumentNode:r}}=e,{type:c,template:l}=s;if(!c)throw new Error("Document type for document with ID ".concat(n," was not provided in the router params."));let d=r({schemaType:c,documentId:n});return d=d.id("editor").title("Editor"),l&&(d=d.initialValueTemplate(l,a)),d.serialize()};function fi(t){var e,n;return"contextHash(".concat(JSON.stringify({id:t.id,parentId:parent&&Ve(parent),path:t.path,index:t.index,splitIndex:t.splitIndex,serializeOptionsIndex:(e=t.serializeOptions)==null?void 0:e.index,serializeOptionsPath:(n=t.serializeOptions)==null?void 0:n.path}),")")}const In=t=>{const e={type:t.type,id:t.routerPaneSibling.id,params:t.routerPaneSibling.params||{},payload:t.routerPaneSibling.payload||null,flatIndex:t.flatIndex,groupIndex:t.groupIndex,siblingIndex:t.siblingIndex,path:t.path,paneNode:t.type==="resolvedMeta"?Ve(t.paneNode):null};return"metaHash(".concat(JSON.stringify(e),")")};function Oe(t){let{unresolvedPane:e,flattenedRouterPanes:n,parent:s,path:a,resolvePane:r,structureContext:c}=t;const[l,...d]=n,u=d[0],h={id:l.routerPaneSibling.id,splitIndex:l.siblingIndex,parent:s,path:[...a,l.routerPaneSibling.id],index:l.flatIndex,params:l.routerPaneSibling.params||{},payload:l.routerPaneSibling.payload,structureContext:c};try{return r(e,h,l.flatIndex).pipe(Fe(p=>{const f={type:"resolvedMeta",...l,paneNode:p,path:h.path},m=d.map((y,_)=>({type:"loading",path:[...h.path,...d.slice(_).map((P,S)=>"[".concat(y.flatIndex+S,"]"))],paneNode:null,...y}));if(!d.length)return te([f]);let v;return u!=null&&u.routerPaneSibling.id.startsWith("__edit__")?v=Oe({unresolvedPane:mi,flattenedRouterPanes:d,parent:s,path:h.path,resolvePane:r,structureContext:c}):l.groupIndex===(u==null?void 0:u.groupIndex)?v=Oe({unresolvedPane:e,flattenedRouterPanes:d,parent:s,path:a,resolvePane:r,structureContext:c}):v=Oe({unresolvedPane:typeof p.child=="function"?ro(p,"child"):p.child,flattenedRouterPanes:d,parent:p,path:h.path,resolvePane:r,structureContext:c}),qn(te([f,...m]),v.pipe(oe(y=>[f,...y])))}))}catch(p){if(p instanceof ge&&(p.context&&console.warn("Pane resolution error at index ".concat(p.context.index).concat(p.context.splitIndex>0?" for split pane index ".concat(p.context.splitIndex):"",": ").concat(p.message).concat(p.helpId?" - see ".concat(no(p.helpId)):""),p),p.helpId==="structure-item-returned-no-child"))return te([]);throw p}}function gi(t){let{routerPanesStream:e,rootPaneNode:n,initialCacheState:s={cacheKeysByFlatIndex:[],flattenedRouterPanes:[],resolvedPaneCache:new Map,resolvePane:()=>zs},structureContext:a}=t;return e.pipe(oe(c=>[[{id:"root"}],...c]),oe(c=>c.flatMap((d,u)=>d.map((h,p)=>({routerPaneSibling:h,groupIndex:u,siblingIndex:p}))).map((d,u)=>({...d,flatIndex:u}))),ls([]),Ys(),oe(c=>{let[l,d]=c;for(let u=0;u<d.length;u++){const h=l[u],p=d[u];if(!ot(h,p))return{flattenedRouterPanes:d,diffIndex:u}}return{flattenedRouterPanes:d,diffIndex:d.length}}),Kt((c,l)=>{const{cacheKeysByFlatIndex:d,resolvedPaneCache:u}=c,{flattenedRouterPanes:h,diffIndex:p}=l,f=d.slice(0,p+1),m=d.slice(p+1),v=new Set(f.flatMap(b=>Array.from(b))),y=m.flatMap(b=>Array.from(b)).filter(b=>!v.has(b));for(const b of y)u.delete(b);return{flattenedRouterPanes:h,cacheKeysByFlatIndex:d,resolvedPaneCache:u,resolvePane:co(b=>(g,P,S)=>{const w=g&&"".concat(Ve(g),"-").concat(fi(P)),C=w&&u.get(w);if(C)return C;const D=b(g,P,S);if(!w)return D;const I=d[S]||new Set;return I.add(w),d[S]=I,u.set(w,D),D})}},s),Fe(c=>{let{flattenedRouterPanes:l,resolvePane:d}=c;return Oe({unresolvedPane:n,flattenedRouterPanes:l,parent:null,path:[],resolvePane:d,structureContext:a})})).pipe(Kt((c,l)=>l.map((d,u)=>{const h=c[u];return!h||d.type!=="loading"?d:h.routerPaneSibling.id===d.routerPaneSibling.id?h:d}),[]),ds((c,l)=>{if(c.length!==l.length)return!1;for(let d=0;d<l.length;d++){const u=c[d],h=l[d];if(In(u)!==In(h))return!1}return!0}))}function bi(){const t=i.useMemo(()=>new us(1),[]),e=i.useMemo(()=>t.asObservable().pipe(oe(s=>(s==null?void 0:s.panes)||[])),[t]),{state:n}=pt();return i.useEffect(()=>{t.next(n)},[n,t]),e}function vi(){const[t,e]=i.useState();if(t)throw t;const{structureContext:n,rootPaneNode:s}=ie(),[a,r]=i.useState({paneDataItems:[],resolvedPanes:[],routerPanes:[]}),c=bi();return i.useEffect(()=>{const d=gi({rootPaneNode:s,routerPanesStream:c,structureContext:n}).pipe(oe(u=>{const h=u.reduce((m,v)=>{const y=m[v.groupIndex]||[];return y[v.siblingIndex]=v.routerPaneSibling,m[v.groupIndex]=y,m},[]),p=h.length,f=u.map(m=>{var v;const{groupIndex:y,flatIndex:_,siblingIndex:b,routerPaneSibling:g,path:P}=m,S=g.id,w=h[y+1];return{active:y===p-2,childItemId:(v=w==null?void 0:w[0].id)!=null?v:null,index:_,itemId:g.id,groupIndex:y,key:"".concat(m.type==="loading"?"unknown":m.paneNode.id,"-").concat(S,"-").concat(b),pane:m.type==="loading"?st:m.paneNode,params:g.params||{},path:P.join(";"),payload:g.payload,selected:_===u.length-1,siblingIndex:b}});return{paneDataItems:f,routerPanes:h,resolvedPanes:f.map(m=>m.pane)}})).subscribe({next:u=>r(u),error:u=>e(u)});return()=>d.unsubscribe()},[s,c,n]),a}async function yi(t,e,n){if(e&&n)return{id:e,type:n};if(!e&&n)return{id:ps(),type:n};if(e&&!n){const s=await so(t.resolveTypeForDocument(e));return{id:e,type:s}}throw new ge({message:"Neither document `id` or `type` was provided when trying to resolve intent."})}const Pi={},xi=i.memo(function(){const{navigate:e}=pt(),n=ht(i.useCallback(d=>{const u=typeof d.intent=="string"?d.intent:void 0;return u?{intent:u,params:se(d.params)?d.params:Pi,payload:d.payload}:void 0},[])),{rootPaneNode:s,structureContext:a}=ie(),r=An(),[c,l]=i.useState(null);if(c)throw c;return i.useEffect(()=>{if(n){const{intent:d,params:u,payload:h}=n;let p=!1;async function f(){const{id:m,type:v}=await yi(r,typeof u.id=="string"?u.id:void 0,typeof u.type=="string"?u.type:void 0);if(p)return;const y=await hi({intent:d,params:{...u,id:m,type:v},payload:h,rootPaneNode:s,structureContext:a});p||e({panes:y},{replace:!0})}return f().catch(l),()=>{p=!0}}},[r,n,e,s,a]),null}),Si=W.span(qt||(qt=B([`
  &:not(:last-child)::after {
    content: ' ➝ ';
    opacity: 0.5;
  }
`])));function wi(t){return t.replace(/\(\.\.\.\)\./g,`(...)
  .`).replace(/__WEBPACK_IMPORTED_MODULE_\d+_+/g,"").replace(/___default\./g,".").replace(new RegExp(" \\(https?:\\/\\/".concat(window.location.host),"g")," (")}function _i(t){let{error:e}=t;if(!(e instanceof ge))throw e;const{cause:n}=e,s=(n==null?void 0:n.stack)||e.stack,a=s&&!(n instanceof Qe)&&!e.message.includes("Module build failed:"),r=n instanceof Qe?n.path:[],c=n instanceof Qe&&n.helpId||e.helpId,l=i.useCallback(()=>{window.location.reload()},[]);return o(ne,{height:"fill",overflow:"auto",padding:4,sizing:"border",tone:"critical",children:x(Ee,{children:[o(hs,{as:"h2",children:"Encountered an error while reading structure"}),x(ne,{marginTop:4,padding:4,radius:2,overflow:"auto",shadow:1,tone:"inherit",children:[r.length>0&&x(J,{space:2,children:[o(rt,{children:"Structure path"}),o(ct,{children:r.slice(1).map((d,u)=>o(Si,{children:d},"".concat(d,"-").concat(u)))})]}),x(J,{marginTop:4,space:2,children:[o(rt,{children:"Error"}),o(ct,{children:a?wi(s):e.message})]}),c&&o(k,{marginTop:4,children:o(O,{children:o("a",{href:no(c),rel:"noopener noreferrer",target:"_blank",children:"View documentation"})})}),o(k,{marginTop:4,children:o(X,{text:"Reload",icon:Nn,tone:"primary",onClick:l})})]})]})})}function Ci(t){const{isSelected:e,pane:n,paneKey:s}=t,a=se(n)&&n.type||null;return x(je,{id:s,selected:e,children:[o(Be,{title:"Unknown pane type"}),o(_e,{children:o(k,{padding:4,children:typeof a=="string"?x(O,{as:"p",muted:!0,children:["Structure item of type ",o("code",{children:a})," is not a known entity."]}):x(O,{as:"p",muted:!0,children:["Structure item is missing required ",o("code",{children:"type"})," property."]})})})]})}function Ii(t){const e=[{ms:300,message:"Loading…"},{ms:5e3,message:"Still loading…"}],n=te(null);return ms(...e.map(s=>{let{ms:a,message:r}=s;return n.pipe(fs(r),gs(a))}))}const Ei="Loading…",ki=W(j)(Jt||(Jt=B([`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`]))),we=i.memo(t=>{const{delay:e=300,flex:n,message:s=Ii,minWidth:a,paneKey:r,path:c,selected:l,title:d,tone:u}=t,h=i.useMemo(()=>typeof s=="function"?s(c?c.split(";"):[]):s,[s,c]),[p,f]=i.useState(()=>typeof h=="string"?h:Ei);i.useEffect(()=>{if(typeof h!="object"||typeof h.subscribe=="function")return;const g=h.subscribe(f);return()=>g.unsubscribe()},[h]);const[m,v]=i.useState(null),[y,_]=i.useState(!1);return i.useEffect(()=>{if(m)return na(()=>_(!0))},[m]),o(je,{flex:n,id:r,minWidth:a,selected:l,tone:u,children:o(_e,{children:x(ki,{align:"center","data-mounted":y?"":void 0,direction:"column",height:"fill",justify:"center",ref:v,children:[o(We,{muted:!0}),(d||p)&&o(k,{marginTop:3,children:o(O,{align:"center",muted:!0,size:1,children:d||p})})]})})})});we.displayName="LoadingPane";const Ti={component:i.lazy(()=>Re(()=>import("./index-7e9d413a-762f2121.js"),["static/index-7e9d413a-762f2121.js","static/sanity-007085ba.js","static/json-inspector-1a795e9b.js"])),document:i.lazy(()=>Re(()=>import("./index-41953214-be244ca6.js"),["static/index-41953214-be244ca6.js","static/sanity-007085ba.js","static/json-inspector-1a795e9b.js"])),documentList:i.lazy(()=>Re(()=>import("./index-5d8405fd-5bc746f7.js"),["static/index-5d8405fd-5bc746f7.js","static/sanity-007085ba.js","static/PaneItem-9b239a45-d94e5c40.js","static/json-inspector-1a795e9b.js"])),list:i.lazy(()=>Re(()=>import("./index-be6d53bc-cdbac04f.js"),["static/index-be6d53bc-cdbac04f.js","static/sanity-007085ba.js","static/PaneItem-9b239a45-d94e5c40.js","static/json-inspector-1a795e9b.js"]))},Di=i.memo(function(e){const{active:n,childItemId:s,groupIndex:a,index:r,itemId:c,pane:l,paneKey:d,params:u,payload:h,path:p,selected:f,siblingIndex:m}=e,v=Ti[l.type]||Ci;return o(oi,{flatIndex:r,index:a,params:u,payload:h,siblingIndex:m,children:o(i.Suspense,{fallback:o(we,{paneKey:d,path:p,selected:f}),children:o(v,{childItemId:s||"",index:r,itemId:c,isActive:n,isSelected:f,paneKey:d,pane:l})})})},(t,e)=>{let{params:n={},payload:s=null,...a}=t,{params:r={},payload:c=null,...l}=e;if(!ot(n,r)||!ot(s,c))return!1;const d=new Set([...Object.keys(a),...Object.keys(l)]);for(const u of d)if(a[u]!==l[u])return!1;return!0});function lo(t){const{children:e,flex:n,minWidth:s,paneKey:a,title:r="Error",tone:c="critical"}=t;return x(je,{flex:n,id:a,minWidth:s,tone:c,children:[o(Be,{title:r}),o(_e,{overflow:"auto",children:o(k,{paddingX:4,paddingY:5,children:e})})]})}function Mi(t){return t==="delete"?`An error occurred while attempting to delete this document.
      This usually means that there are other documents that refers to it.`:t==="unpublish"?`An error occurred while attempting to unpublish this document.
      This usually means that there are other documents that refers to it.`:"An error occurred during ".concat(t)}function Ri(t){return t==="publish"?"The document was published":t==="unpublish"?"The document was unpublished. A draft has been created from the latest published version.":t==="discardChanges"?"All changes since last publish has now been discarded. The discarded draft can still be recovered from history":t==="delete"?"The document was successfully deleted":"Successfully performed ".concat(t," on document")}const Oi=["patch","commit"],Li=i.memo(function(){const{push:e}=Ce(),{documentId:n,documentType:s}=V(),a=oa(n,s),r=i.useRef(a);return i.useEffect(()=>{!a||a===r.current||(a.type==="error"&&e({closable:!0,duration:3e4,status:"error",title:Mi(a.op),description:x("details",{children:[o("summary",{children:"Details"}),a.error.message]})}),a.type==="success"&&!Oi.includes(a.op)&&e({closable:!0,status:"success",title:Ri(a.op)}),r.current=a)},[a,e]),null}),Ai=t=>{const{features:e,hasValue:n,changesOpen:s}=t;return e.reviewChanges?{action:"reviewChanges",title:"Review changes",icon:bs,isDisabled:s||!n}:null},ji=t=>{let{hasValue:e}=t;return{action:"inspect",title:"Inspect",icon:vs,isDisabled:!e,shortcut:"Ctrl+Alt+I"}},zi=t=>{let{previewUrl:e}=t;return e?{action:"production-preview",title:"Open preview",icon:ys,shortcut:"Ctrl+Alt+O"}:null},Bi=t=>[zi,Ai,ji].filter(Boolean).map(n=>n(t)).filter(n=>n!==null),Ni=t=>se(t)&&typeof t._id=="string"&&typeof t._type=="string";function Wi(t){const[e,n]=i.useState(void 0),[s,a]=i.useState(null),{resolveProductionUrl:r}=ze().document,c=ei(t);if(s)throw s;return i.useEffect(()=>{c.pipe(Gn(500),Fe(l=>Ni(l)?Kn(r({document:l})):te(void 0)),Ha(l=>{const d=se(l)&&typeof l.message=="string"?l.message:"Unknown error";throw new Error("An error was thrown while trying to get your preview url: ".concat(d))})).subscribe({next:n,error:a})},[r,c]),e}function Fi(t,e){const n=e.panePayload||{},s=e.templateName;e.urlTemplate&&s&&s!==e.urlTemplate&&console.warn('Conflicting templates: URL says "'.concat(e.urlTemplate,'", structure node says "').concat(s,'". Using "').concat(s,'".'));const a=s||e.urlTemplate,r=t.filter(d=>d.schemaType===e.documentType),c={...e.templateParams,...typeof n=="object"?n||{}:{}};let l=a;return!a&&r.length===1&&(l=r[0].id),{templateName:l,templateParams:c}}const Vi={},uo=i.memo(t=>{const{children:e,index:n,pane:s,paneKey:a}=t,r=jn(),c=zn(),{actions:l,badges:d,unstable_languageFilter:u}=ze().document,h=aa(),p=Ie(),{features:f}=ie(),{push:m}=Ce(),{options:v,menuItemGroups:y,title:_=null,views:b=[]}=s,g=le(v),P=g.id,S=at(P),w=v.type,C=le(p.params),D=le(p.payload),{templateName:I,templateParams:T}=i.useMemo(()=>Fi(c,{documentType:w,templateName:g.template,templateParams:g.templateParameters,panePayload:D,urlTemplate:C==null?void 0:C.template}),[w,g,C,D,c]),L=sa({documentId:S,documentType:w,templateName:I,templateParams:T}),M=le(L),{patch:N}=ia(S,w),R=ra(S,w),{validation:z}=ca(S,w),G=la(S,w),Y=r.get(w),A=(R==null?void 0:R.draft)||(R==null?void 0:R.published)||M.value,q=i.useMemo(()=>l({schemaType:w,documentId:S}),[l,S,w]),Q=i.useMemo(()=>d({schemaType:w,documentId:S}),[d,S,w]),ee=i.useMemo(()=>u({schemaType:w,documentId:S}),[S,w,u]),It=le(z),Ue=le(b),K=p.params||Vi,[Et,be]=i.useState(()=>K.path?xe(K.path):[]),xo=K.view||Ue[0]&&Ue[0].id||null,[So,wo]=i.useState("closed"),ve=!!K.since,[kt,_o]=i.useState(null),re=da({documentId:S,documentType:w,onError:_o,rev:K.rev,since:K.since}),Tt=H(re,E=>E.onOlderRevision),Dt=H(re,E=>E.revTime),Co=H(re,E=>E.sinceAttributes),Mt=H(re,E=>E.timelineDisplayed),Io=H(re,E=>E.timelineReady),ce=Wi(A),[Eo,ko]=i.useState([]);i.useEffect(()=>{const E=h.documentPresence(S).subscribe(U=>{ko(U)});return()=>{E.unsubscribe()}},[S,h]);const Rt=!!A,He=i.useMemo(()=>Bi({features:f,hasValue:Rt,changesOpen:ve,previewUrl:ce}),[ve,f,Rt,ce]),Ge=K.inspect==="on",Ot=ve?Co:(R==null?void 0:R.published)||null,ye=G==="connected"&&R.ready&&(Io||!!kt),Lt=i.useMemo(()=>Tt?Mt||{_id:A._id,_type:A._type}:A,[Tt,Mt,A]),To=i.useCallback((E,U)=>{p.setParams({...p.params,since:E,rev:U||void 0})},[p]),Do=i.useCallback(E=>{be(E),h.setLocation([{type:"document",documentId:S,path:E,lastActiveAt:new Date().toISOString()}])},[S,h,be]),Mo=i.useCallback(E=>{be([])},[be]),At=i.useRef(()=>{throw new Error("Nope")});At.current=E=>{N.execute(ua(E.patches),M.value)};const Ro=i.useCallback(E=>At.current(E),[]),Oo=i.useCallback(()=>{p.setParams({...K,since:void 0})},[p,K]),Ke=i.useCallback(()=>{p.setParams({...K,since:"@lastPublished"})},[p,K]),Lo=i.useCallback(()=>p.closeCurrent(),[p]),Ao=i.useCallback(()=>p.duplicateCurrent(),[p]),De=i.useCallback(function(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!Ge)?p.setParams({...K,inspect:"on"}):p.setParams(mt(K,"inspect"))},[Ge,p,K]),$e=i.useCallback(E=>E.action==="production-preview"&&ce?(window.open(ce),!0):E.action==="inspect"?(De(!0),!0):E.action==="reviewChanges"?(Ke(),!0):!1,[Ke,ce,De]),jo=i.useCallback(E=>{for(const U of He)if(U.shortcut&&ft(U.shortcut,E)){E.preventDefault(),E.stopPropagation(),$e(U);return}},[$e,He]),zo=i.useCallback(()=>De(!1),[De]),[Bo,No]=i.useState([]),[Wo,jt]=i.useState(),[zt,Bt]=i.useState(),[Nt,Wt]=i.useState(),Fo=i.useCallback((E,U)=>{Bt($=>de($,E,U))},[]),Vo=i.useCallback((E,U)=>{Wt($=>de($,E,U))},[]),Uo=i.useCallback((E,U)=>jt($=>de($,E,U)),[]),Ho=A._createdAt?"update":"create",Ft=i.useMemo(()=>!!(Y!=null&&Y.liveEdit),[Y==null?void 0:Y.liveEdit]),Xe=A._id?A._id:"dummy-id",Go=i.useMemo(()=>({...A,_id:Ft?at(Xe):pa(Xe)}),[Ft,A,Xe]),[Pe,Ye]=ha({document:Go,permission:Ho}),Vt=!(A!=null&&A._id),Ko=i.useMemo(()=>{const E=!Ye&&!(Pe!=null&&Pe.granted),U=!Ut(Y,"update"),$=Vt&&!Ut(Y,"create");return!ye||Dt!==null||E||U||$||G==="reconnecting"},[G,Vt,Ye,Pe==null?void 0:Pe.granted,ye,Dt,Y]),qe=ma(Y,{value:Lt,readOnly:Ko,comparisonValue:Ot,focusPath:Et,openPath:Bo,collapsedPaths:zt,presence:Eo,validation:It,collapsedFieldSets:Nt,fieldGroupState:Wo,changesOpen:ve}),Me=i.useRef(qe);Me.current=qe;const Je=i.useCallback(E=>{fa(Me.current,E).forEach($=>{$.type==="expandPath"&&Bt(Z=>de(Z,$.path,!1)),$.type==="expandFieldSet"&&Wt(Z=>de(Z,$.path,!1)),$.type==="setSelectedGroup"&&jt(Z=>de(Z,$.path,$.groupName))}),No(E)},[Me]),$o={actions:q,activeViewId:xo,badges:Q,changesOpen:ve,collapsedFieldSets:Nt,collapsedPaths:zt,compareValue:Ot,connectionState:G,displayed:Lt,documentId:S,documentIdRaw:P,documentType:w,editState:R,focusPath:Et,menuItems:He,onBlur:Mo,onChange:Ro,onFocus:Do,onPathOpen:Je,onHistoryClose:Oo,onHistoryOpen:Ke,onInspectClose:zo,onKeyUp:jo,onMenuAction:$e,onPaneClose:Lo,onPaneSplit:Ao,onSetActiveFieldGroup:Uo,onSetCollapsedPath:Fo,onSetCollapsedFieldSet:Vo,index:n,inspectOpen:Ge,validation:It,menuItemGroups:y||[],paneKey:a,previewUrl:ce,ready:ye,schemaType:Y,isPermissionsLoading:Ye,permissions:Pe,setTimelineMode:wo,setTimelineRange:To,timelineError:kt,timelineMode:So,timelineStore:re,title:_,value:A,views:Ue,formState:qe,unstable_languageFilter:ee};return i.useEffect(()=>{G==="reconnecting"&&m({id:"sanity/desk/reconnecting",status:"warning",title:o(F,{children:"Connection lost. Reconnecting…"})})},[G,m]),i.useEffect(()=>{var E;if(ye&&K.path){const{path:U,...$}=K,Z=ga((E=Me.current)==null?void 0:E.value,xe(U));be(Z),Je(Z),p.setParams($)}},[K,S,Je,ye,p]),o(ba.Provider,{value:$o,children:e})});uo.displayName="DocumentPaneProvider";const Ui={create:"created",delete:"deleted",discardDraft:"discarded draft",initial:"created",editDraft:"edited",editLive:"live edited",publish:"published",unpublish:"unpublished"},Hi={create:Xt,delete:Gs,discardDraft:Se,initial:Xt,editDraft:Yt,editLive:Yt,publish:to,unpublish:Ks};function po(t){return Ui[t]}function Gi(t){return Hi[t]}function Ki(t){let{maxLength:e,userIds:n}=t;return o(Xn,{maxLength:e,children:n.map(s=>o(Yn,{user:s,withTooltip:!0},s))})}const Le=W(j)(t=>{let{theme:e}=t;var n;const s=(n=e.sanity.color.base.skeleton)==null?void 0:n.from;return ae(Zt||(Zt=B([`
    --timeline-hairline-width: 1px;
    position: relative;
    z-index: 2;
    margin: 0;
    padding: 0;

    &::before {
      position: absolute;
      content: '';
      height: 100%;
      width: var(--timeline-hairline-width);
      background: `,`;
      top: 0;
      left: calc((100% - var(--timeline-hairline-width)) / 2);
      z-index: 1;
    }
  `])),s)}),$i=W(X)(t=>{let{$selected:e}=t;return ae(Qt||(Qt=B([`
    position: relative;
    width: 100%;

    /* Line styling */
    &[data-first] `,`::before {
      height: 50%;
      top: unset;
      bottom: 0;
    }

    &[data-last] `,`::before {
      height: 50%;
    }

    `,`
  `])),Le,Le,e&&ae(en||(en=B([`
      `,`::before {
        background: transparent;
      }
    `])),Le))}),Xi=W(k)(tn||(tn=B([`
  background: var(--card-bg-color);
  border-radius: 50px;
  position: relative;
  z-index: 2;
`]))),Yi=W(O)(nn||(nn=B([`
  text-transform: capitalize;
`]))),qi=W(k)(on||(on=B([`
  min-width: 1rem;
  margin-left: `,`;
`])),t=>{let{theme:e}=t;return"-".concat(ue(e.sanity.space[1]))}),En={initial:"primary",create:"primary",publish:"positive",editLive:"caution",editDraft:"caution",unpublish:"critical",discardDraft:"critical",delete:"critical",withinSelection:"primary"};function Ji(t){let{chunk:e,isFirst:n,isLast:s,isLatest:a,isSelected:r,onSelect:c,timestamp:l,type:d}=t;const u=Gi(d),h=Array.from(e.authors),p=i.useMemo(()=>{const m=new Date(l);return $n(m,"MMM d, yyyy, hh:mm a")},[l]),f=i.useCallback(m=>{m.preventDefault(),m.stopPropagation(),c(e)},[c,e]);return o($i,{$selected:r,"data-chunk-id":e.id,"data-first":n?!0:void 0,"data-last":s?!0:void 0,"data-ui":"timelineItem",mode:r?"default":"bleed",onClick:f,padding:0,radius:2,tone:r?"primary":En[e.type],children:o(k,{paddingX:2,children:x(j,{align:"stretch",children:[o(Le,{align:"center",children:o(Xi,{padding:2,children:o(O,{size:2,children:u&&i.createElement(u)})})}),x(J,{space:2,margin:2,children:[a&&o(j,{children:o(ne,{padding:1,radius:2,shadow:1,tone:r?"primary":En[e.type],children:o(rt,{muted:!0,size:0,children:"Latest"})})}),o(k,{children:o(Yi,{size:1,weight:"medium",children:po(d)||o("code",{children:d})})}),o(qi,{paddingX:1,children:o(O,{size:0,muted:!0,children:p})})]}),o(j,{flex:1,justify:"flex-end",align:"center",children:o(Ki,{maxLength:3,userIds:h})})]})})})}const Zi=W(J)(an||(an=B([`
  max-width: 200px;
`]))),Qi=W(j)(sn||(sn=B([`
  max-height: calc(100vh - 198px);
  min-width: 244px;
`]))),er=W(k)(t=>{let{$visible:e}=t;return ae(rn||(rn=B([`
    opacity: 0;
    pointer-events: none;

    `,`
  `])),e&&ae(cn||(cn=B([`
      opacity: 1;
      pointer-events: auto;
    `]))))}),ut=t=>{let{chunks:e,disabledBeforeFirstChunk:n,hasMoreChunks:s,lastChunk:a,onLoadMore:r,onSelect:c,firstChunk:l}=t;const[d,u]=i.useState(!1),h=i.useMemo(()=>e.filter(m=>n&&l?m.index<l.index:!0),[e,n,l]),p=i.useMemo(()=>a!=null&&a.id?h.findIndex(m=>m.id===a.id):-1,[a==null?void 0:a.id,h]),f=i.useCallback((m,v)=>{let{activeIndex:y}=v;const _=y===0,b=h&&y===h.length-1||!1;return x(k,{paddingBottom:b?1:0,paddingTop:_?1:0,paddingX:1,children:[o(Ji,{chunk:m,isFirst:_,isLast:b,isLatest:y===0&&!n,isSelected:y===p,onSelect:c,timestamp:m.endTimestamp,type:m.type}),y===h.length-1&&s&&o(j,{align:"center",justify:"center",padding:4,children:o(We,{muted:!0})})]})},[n,h,s,c,p]);return i.useEffect(()=>u(!0),[]),x(er,{$visible:!p||d,"data-ui":"timeline",children:[h.length===0&&x(Zi,{padding:3,space:3,children:[o(O,{size:1,weight:"semibold",children:"No document history"}),o(O,{muted:!0,size:1,children:"When changing the content of the document, the document versions will appear in this menu."})]}),h.length>0&&o(Qi,{direction:"column",children:o(Bs,{activeItemDataAttr:"data-hovered",ariaLabel:"Document revisions",autoFocus:"list",initialIndex:p,initialScrollAlign:"center",itemHeight:40,items:h,onEndReached:r,onEndReachedIndexOffset:20,overscan:5,renderItem:f,wrapAround:!1})})]})};ut.displayName="Timeline";function tr(){return x(j,{align:"flex-start",gap:3,padding:4,children:[o(et,{tone:"critical",children:o(oo,{})}),x(J,{space:4,children:[o(et,{size:1,tone:"critical",weight:"semibold",children:"An error occurred whilst retrieving document changes."}),o(et,{size:1,tone:"critical",children:"Document history transactions have not been affected."})]})]})}const nr=W(gt)(ln||(ln=B([`
  overflow: hidden;
  overflow: clip;
`])));function ho(t){let{chunk:e,mode:n,placement:s}=t;const{setTimelineRange:a,setTimelineMode:r,timelineError:c,ready:l,timelineStore:d}=V(),[u,h]=i.useState(!1),[p,f]=i.useState(null),[m,v]=i.useState(null),y=Ce(),_=H(d,A=>A.chunks),b=H(d,A=>A.isLoading),g=H(d,A=>A.hasMoreChunks),P=H(d,A=>A.realRevChunk),S=H(d,A=>A.sinceTime),w=i.useCallback(()=>{r(n),h(!0)},[n,r]),C=i.useCallback(()=>{r("closed"),h(!1)},[r]),D=i.useCallback(()=>{u&&C()},[C,u]),I=i.useCallback(A=>{u&&(A.key==="Escape"||A.key==="Tab")&&(C(),p==null||p.focus())},[p,C,u]);Pt(D,[p,m]),xt(I);const T=i.useCallback(A=>{try{const[q,Q]=d.findRangeForRev(A);r("closed"),a(q,Q)}catch(q){y.push({closable:!0,description:q.message,status:"error",title:"Unable to load revision"})}},[r,a,d,y]),L=i.useCallback(A=>{try{const[q,Q]=d.findRangeForSince(A);r("closed"),a(q,Q)}catch(q){y.push({closable:!0,description:q.message,status:"error",title:"Unable to load revision"})}},[r,a,d,y]),M=i.useCallback(()=>{b||d.loadMore()},[b,d]),N=c?o(tr,{}):x(F,{children:[n==="rev"&&o(ut,{chunks:_,firstChunk:P,hasMoreChunks:g,lastChunk:P,onLoadMore:M,onSelect:T}),n==="since"&&o(ut,{chunks:_,disabledBeforeFirstChunk:!0,firstChunk:P,hasMoreChunks:g,lastChunk:S,onLoadMore:M,onSelect:L})]}),R=or((e==null?void 0:e.endTimestamp)||""),z=e?"".concat(Ga(po(e.type)),": ").concat(R):"Latest version",G=e?"Since: ".concat(R):"Since: unknown version";return o(nr,{constrainSize:!0,content:u&&N,"data-ui":"versionMenu",open:u,placement:s,portal:!0,ref:v,children:o(X,{disabled:!l,mode:"bleed",fontSize:1,padding:2,iconRight:Ka,onClick:u?C:w,ref:f,selected:u,text:l?n==="rev"?z:G:"Loading history"})})}function or(t){return i.useMemo(()=>{const n=t?new Date(t):new Date;return $n(n,"MMM d, yyyy, hh:mm a")},[t])}function ar(){return o(io,{ms:300,children:x(j,{align:"center",direction:"column",height:"fill",justify:"center",paddingTop:3,children:[o(We,{muted:!0}),o(k,{marginTop:3,children:o(O,{align:"center",muted:!0,size:1,children:"Loading changes"})})]})})}function sr(t){const e=new Map;return Ps(t,n=>{if(n.action==="unchanged"||!("annotation"in n)||!n.annotation)return!0;const{author:s,timestamp:a}=n.annotation,r=e.get(s);return(!r||r.timestamp<a)&&e.set(s,n.annotation),!0}),Array.from(e.values()).sort((n,s)=>n.timestamp<s.timestamp?1:-1)}const ir=W(Bn)(dn||(dn=B([`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`])));function rr(){const{documentId:t,onHistoryClose:e,schemaType:n,timelineError:s,timelineStore:a,value:r}=V(),{collapsed:c}=Wn(),l=i.useRef(null),d=H(a,_=>_.diff),u=H(a,_=>_.onOlderRevision),h=H(a,_=>_.selectionState),p=H(a,_=>_.sinceTime),f=h==="loading",m=!u,v=fe.useMemo(()=>({documentId:t,schemaType:n,FieldWrapper:$a,rootDiff:d,isComparingCurrent:m,value:r}),[t,d,m,n,r]),y=fe.useMemo(()=>d?sr(d):[],[d]);return c?null:x(j,{direction:"column",flex:1,style:{borderLeft:"1px dashed var(--card-border-color)",overflow:"hidden",minWidth:320},"data-testid":"review-changes-pane",children:[o(Be,{actions:o(X,{icon:Se,mode:"bleed",onClick:e,padding:3,title:"Hide changes panel"}),subActions:y.length>0&&o(k,{paddingRight:1,children:o(Xa,{annotations:y,description:"Changes by",placement:"bottom-end",children:o(Xn,{maxLength:4,children:y.map(_=>{let{author:b}=_;return o(Yn,{user:b},b)})})})}),tabs:o(ho,{mode:"since",chunk:p,placement:"bottom-start"}),title:"Changes"}),o(_e,{children:o(yt,{element:l.current,children:o(ir,{"data-ui":"Scroller",ref:l,children:o(k,{flex:1,padding:4,children:o(cr,{diff:d,documentContext:v,error:s,loading:f})})})})})]})}function cr(t){let{error:e,diff:n,documentContext:s,loading:a}=t;const{schemaType:r}=V();return e?o(Gt,{}):a?o(ar,{}):n?o(Ya.Provider,{value:s,children:o(qa,{diff:n,schemaType:r})}):o(Gt,{})}function lr(t,e,n){const s=va(),[a,r]=i.useState(n),c=i.useMemo(()=>s.forNamespace("desk-tool"),[s]),l=i.useMemo(()=>t?c.forNamespace(t).forKey(e):c.forKey(e),[c,t,e]);i.useEffect(()=>{const u=l.listen(n).subscribe({next:r});return()=>u==null?void 0:u.unsubscribe()},[n,e,t,l]);const d=i.useCallback(u=>{r(u),l.set(u)},[l]);return i.useMemo(()=>[a,d],[d,a])}const pe={id:"parsed",title:"Parsed"},he={id:"raw",title:"Raw JSON"},dr=[pe,he],Ae=$s(1e3);function mo(t,e){const n=Ae.get(t);return n===void 0?(Ae.set(t,Array.isArray(e)||se(e)),mo(t,e)):n}function ur(t){const{path:e}=t,n=Ae.get(e);n!==void 0&&Ae.set(e,!n)}function fo(t){const e=window.getSelection();if(e){const n=document.createRange();e.removeAllRanges(),n.selectNodeContents(t),e.addRange(n)}}function kn(t){fo(t.currentTarget)}function pr(t){t.keyCode===65&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),fo(t.currentTarget))}function hr(t){return se(t)&&$t(t._id)&&$t(t._type)}const mr=W.div(t=>{let{theme:e}=t;const{color:n,fonts:s,space:a}=e.sanity;return ae(un||(un=B([`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: `,`;
      font-size: `,`px;
      line-height: `,`px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: `,`;
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: `,`;
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - `,` + 3px);
      font-size: `,`px;
      line-height: `,`px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: `,`px;
      line-height: `,`px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: `,`;
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: `,`;
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: `,`;
    }

    & .json-inspector .json-inspector__value_string {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_boolean {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_number {
      color: `,`;
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `])),s.code.family,s.code.sizes[2].fontSize,s.code.sizes[2].lineHeight,ue(a[4]),ue(a[3]),ue(a[4]),s.code.sizes[2].fontSize,s.code.sizes[2].lineHeight,s.code.sizes[2].fontSize,s.code.sizes[2].lineHeight,ue(a[4]/2),n.syntax.property,n.syntax.constant,ue(a[3]),n.syntax.string,n.syntax.boolean,n.syntax.number)});function fr(t){const{onChange:e,query:n}=t,s=i.useCallback(a=>e(a.target.value),[e]);return o(Ns,{icon:Ws,onChange:s,placeholder:"Search",radius:2,value:n||""})}function gr(t){const{value:e}=t,{onInspectClose:n,paneKey:s}=V(),a="".concat(s,"_inspect_"),[r,c]=lr("desk-tool","inspect-view-preferred-view-mode-".concat(s),"parsed"),l=dr.find(h=>h.id===r),d=i.useCallback(()=>{c(pe.id)},[c]),u=i.useCallback(()=>{c(he.id)},[c]);return o(wt,{id:"".concat(a,"dialog"),header:hr(e)?x(F,{children:["Inspecting"," ",o("em",{children:o(xs,{document:e})})]}):o("em",{children:"No value"}),onClose:n,onClickOutside:n,width:3,children:x(j,{direction:"column",height:"fill",children:[o(ne,{padding:3,shadow:1,style:{position:"sticky",bottom:0,zIndex:3},children:x(Jn,{space:1,children:[o(it,{"aria-controls":"".concat(a,"tabpanel"),fontSize:1,id:"".concat(a,"tab-").concat(pe.id),label:pe.title,onClick:d,selected:l===pe}),o(it,{"aria-controls":"".concat(a,"tabpanel"),fontSize:1,id:"".concat(a,"tab-").concat(he.id),label:he.title,onClick:u,selected:l===he})]})}),x(Ss,{"aria-labelledby":"".concat(a,"tab-").concat(r),flex:1,id:"".concat(a,"tabpanel"),overflow:"auto",padding:4,style:{outline:"none"},children:[l===pe&&o(mr,{children:o(Xs,{data:e,isExpanded:mo,onClick:ur,search:fr})}),l===he&&o(ct,{language:"json",tabIndex:0,onKeyDown:pr,onDoubleClick:kn,onFocus:kn,children:JSON.stringify(e,null,2)})]})]})})}const br=W(ne)(pn||(pn=B([`
  position: relative;
  z-index: 50;
`]))),Tn=W(O)(hn||(hn=B([`
  & > * {
    overflow: hidden;
    overflow: clip;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
`]))),go=i.memo(()=>{var t,e,n,s,a,r;const c=ya(),{params:l,groupIndex:d,routerPanesState:u,replaceCurrent:h,BackLink:p}=Ie(),f=(t=u[d])==null?void 0:t[0].id,m=u[d-1],v=m==null?void 0:m[0],y=v==null?void 0:v.id,_=!!((e=v==null?void 0:v.params)!=null&&e.rev),b=i.useMemo(()=>(l==null?void 0:l.parentRefPath)&&xe(l.parentRefPath)||null,[l==null?void 0:l.parentRefPath]),g=Pa(()=>{const w=b==null?void 0:b[0];if(!y||!w||!b)return te({loading:!1});const C=at(y),D=xe(w),I=D.findIndex(T=>typeof T=="object"&&"_key"in T);return qn(te({loading:!0}),c.unstable_observePathsDocumentPair(C,I===-1?D:D.slice(0,I)).pipe(Gn(750),oe(T=>{let{draft:L,published:M}=T;var N;return{loading:!1,result:{availability:{draft:L.availability,published:M.availability},refValue:(N=Ja(L.snapshot||M.snapshot,b))==null?void 0:N._ref}}})))},[c,y,b],{loading:!0}),P=i.useCallback(()=>{var w;g.loading||(w=g.result)!=null&&w.refValue&&h({id:g.result.refValue,params:l})},[g.loading,g.result,h,l]);return!y||!b||_||g.loading||!((n=g.result)!=null&&n.availability.draft.available)&&!((s=g.result)!=null&&s.availability.published.available)||((a=g.result)==null?void 0:a.refValue)===f?null:o(br,{shadow:1,tone:"caution","data-testid":"reference-changed-banner",children:o(Ee,{paddingX:4,paddingY:2,sizing:"border",width:1,children:x(j,{align:"center",children:[o(O,{size:1,children:o(bt,{})}),(r=g.result)!=null&&r.refValue?x(F,{children:[o(k,{flex:1,marginLeft:3,children:o(Tn,{title:"This reference has changed since you opened it.",size:1,children:"This reference has changed since you opened it."})}),o(k,{marginLeft:3,children:o(X,{onClick:P,icon:Nn,fontSize:1,mode:"ghost",padding:2,space:2,text:"Reload reference"})})]}):x(F,{children:[o(k,{flex:1,marginLeft:3,children:o(Tn,{title:"This reference has been removed since you opened it.",size:1,children:"This reference has been removed since you opened it."})}),o(k,{marginLeft:3,children:o(X,{as:p,icon:Se,fontSize:1,mode:"ghost",padding:2,space:2,text:"Close reference"})})]})]})})})});go.displayName="ReferenceChangedBanner";const vr=W(ne)(mn||(mn=B([`
  position: relative;
  z-index: 50;
`])));function yr(t){let{granted:e,requiredPermission:n}=t;var s,a;const r=ws(),c=((s=r==null?void 0:r.roles)==null?void 0:s.length)!==1,l=Pr(((a=r==null?void 0:r.roles)==null?void 0:a.map(d=>o("code",{children:d.title},d.name)))||[],", ");return e?null:o(vr,{"data-testid":"permission-check-banner",shadow:1,tone:"transparent",children:o(Ee,{paddingX:4,paddingY:3,sizing:"border",width:1,children:x(j,{align:"flex-start",children:[o(O,{size:1,children:o(_s,{})}),o(k,{flex:1,marginLeft:3,children:x(O,{size:1,children:["Your role",c&&"s"," ",l," ",c?"do":"does"," not have permissions to"," ",n," this document."]})})]})})})}function Pr(t,e){return t.reduce((n,s)=>n===null?[s]:n.concat([e,s]),null)}function xr(t){const e=i.useRef();return i.useEffect(()=>{e.current=t},[t]),e.current}const Sr=1e3*60*60*24*24;function wr(t){const e=Ce(),n=xr(t.enabled);i.useEffect(()=>{!n&&t.enabled&&e.push({...t,duration:Sr}),n&&!t.enabled&&e.push({...t,duration:.01})},[t,e,n])}const _r=t=>t.preventDefault();function Cr(t){var e;const{hidden:n,margins:s}=t,{collapsedFieldSets:a,collapsedPaths:r,displayed:c,editState:l,documentId:d,documentType:u,onChange:h,validation:p,ready:f,formState:m,onFocus:v,onBlur:y,onSetCollapsedPath:_,onPathOpen:b,onSetCollapsedFieldSet:g,onSetActiveFieldGroup:P}=V(),S=An(),w=Cs(d),C=i.useMemo(()=>Is(),[]),D=(e=l==null?void 0:l.transactionSyncLock)==null?void 0:e.enabled;wr({id:"sync-lock-".concat(d),status:"warning",enabled:D,title:"Syncing document…",description:"Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds"}),i.useEffect(()=>{const L=S.pair.documentEvents(d,u).pipe(Es(M=>{M.type==="mutation"&&C.publish(Ir(M)),M.type==="rebase"&&C.publish(Er(M))})).subscribe();return()=>{L.unsubscribe()}},[d,S,u,C]);const I=!!(c!=null&&c._rev);i.useEffect(()=>{I&&C.publish({type:"mutation",patches:[],snapshot:c})},[I]);const T=i.useRef(null);return i.useEffect(()=>{f&&!(m!=null&&m.focusPath.length)&&ks(T.current)},[f]),o(Ee,{hidden:n,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:o(Ts,{margins:s,children:o(k,{as:"form",onSubmit:_r,ref:T,children:f?m===null?o(k,{padding:2,children:o(O,{children:"This form is hidden"})}):o(Ds,{__internal_patchChannel:C,collapsedFieldSets:a,collapsedPaths:r,focusPath:m.focusPath,changed:m.changed,focused:m.focused,groups:m.groups,id:"root",members:m.members,onChange:h,onFieldGroupSelect:P,onPathBlur:y,onPathFocus:v,onPathOpen:b,onSetFieldSetCollapsed:g,onSetPathCollapsed:_,presence:w,readOnly:m.readOnly,schemaType:m.schemaType,validation:p,value:m.value}):o(io,{ms:300,children:x(j,{align:"center",direction:"column",height:"fill",justify:"center",children:[o(We,{muted:!0}),o(k,{marginTop:3,children:o(O,{align:"center",muted:!0,size:1,children:"Loading document"})})]})})})})})}function Ir(t){const e=t.mutations.map(n=>n.patch).filter(Boolean);return{type:"mutation",snapshot:t.document,patches:lt(t.origin,e)}}function Er(t){const e=t.remoteMutations.map(s=>s.patch).filter(Boolean),n=t.localMutations.map(s=>s.patch).filter(Boolean);return{type:"rebase",snapshot:t.document,patches:lt("remote",e).concat(lt("local",n))}}function kr(){const{activeViewId:t,paneKey:e,views:n}=V(),s="".concat(e,"tabpanel");return o(Jn,{space:1,children:n.map((a,r)=>{var c;return o(Tr,{icon:a.icon,id:"".concat(e,"tab-").concat(a.id),isActive:t===a.id,label:o(F,{children:a.title}),tabPanelId:s,viewId:r===0?null:(c=a.id)!=null?c:null},a.id)})})}function Tr(t){const{isActive:e,tabPanelId:n,viewId:s}=t,{ready:a}=V(),{setView:r}=Ie(),c=i.useCallback(()=>r(s),[r,s]);return o(it,{...t,"aria-controls":n,disabled:!a,fontSize:1,selected:e,onClick:c})}const nt={error:{tone:"critical",icon:oo},warning:{tone:"caution",icon:bt},info:{tone:"primary",icon:Ms}};function Dr(t){const{boundaryElement:e,isOpen:n,setOpen:s}=t,{onFocus:a,onPathOpen:r,schemaType:c,validation:l}=V(),d=i.useId(),u=l.length>0,h=l.some(Za),p=l.some(Qa),f=l.some(es),m=i.useMemo(()=>{if(h)return nt.error;if(p)return nt.warning;if(f)return nt.info},[h,f,p]),v=i.useCallback(_=>{r(_),a(_)},[a,r]),y=i.useCallback(()=>s(!1),[s]);return u?o(Zn,{id:d||"",button:o(X,{...m,title:"Show validation issues",mode:"bleed","data-testid":"validation-list-button"}),menu:o(Qn,{open:n,children:o(ts,{documentType:c,validation:l,onClose:y,onFocus:v})}),popover:{portal:!0,boundaryElement:e,constrainSize:!0,preventOverflow:!0,width:0},placement:"bottom"}):null}function Mr(){const{connectionState:t,schemaType:e,title:n,value:s}=V(),a=!!s&&t==="connected",{error:r,value:c}=ns({enabled:a,schemaType:e,value:s});return t!=="connected"?o(F,{}):n?o(F,{children:n}):s?r?x(F,{children:["Error: ",r.message]}):o(F,{children:(c==null?void 0:c.title)||o("span",{style:{color:"var(--card-muted-fg-color)"},children:"Untitled"})}):x(F,{children:["New ",(e==null?void 0:e.title)||(e==null?void 0:e.name)]})}const Rr=t=>!!t.showAsAction,Or=xa(Rr),bo=i.memo(i.forwardRef((t,e)=>{let{rootElement:n}=t;const{onMenuAction:s,onPaneClose:a,onPaneSplit:r,validation:c,menuItems:l,menuItemGroups:d,schemaType:u,timelineStore:h,ready:p,views:f,unstable_languageFilter:m}=V(),{features:v}=ie(),{index:y,BackLink:_,hasGroupSiblings:b}=Ie(),g=i.useMemo(()=>l.filter(Or),[l]),[P,S]=fe.useState(!1),w=f.length>1,C=v.reviewChanges,D=H(h,z=>z.revTime),{collapsed:I,isLast:T}=Wn(),L=T&&!I?-1:0,M=v.splitViews&&r&&f.length>1,N=M&&b,R=!N&&!v.backButton;return o(Be,{ref:e,loading:!p,title:o(Mr,{}),tabs:w&&o(kr,{}),tabIndex:L,backButton:v.backButton&&y>0&&o(X,{as:_,"data-as":"a",icon:Sa,mode:"bleed"}),subActions:C&&o(ho,{chunk:D,mode:"rev",placement:"bottom-end"}),actions:x(Fn,{space:1,children:[m.length>0&&o(F,{children:m.map((z,G)=>i.createElement(z,{key:"language-filter-".concat(G),schemaType:u}))}),c.length>0&&o(Dr,{boundaryElement:n,isOpen:P,setOpen:S},"validation-menu"),o(wa,{itemGroups:d,items:g,onAction:s},"context-menu"),M&&o(X,{icon:_a,mode:"bleed",onClick:r,title:"Split pane right"},"split-pane-button"),N&&o(X,{icon:Se,mode:"bleed",onClick:a,title:"Close split pane"},"close-view-button"),R&&o(X,{icon:Se,mode:"bleed",title:"Close pane group",as:_},"close-view-button")]})})}));bo.displayName="DocumentPanelHeader";const Lr=W(Bn)(t=>{let{$disabled:e}=t;return e?{height:"100%"}:ae(fn||(fn=B([`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `])))}),Ar=function(e){const{footerHeight:n,isInspectOpen:s,rootElement:a,setDocumentPanelPortalElement:r}=e,{activeViewId:c,displayed:l,documentId:d,editState:u,value:h,views:p,ready:f,schemaType:m,permissions:v,isPermissionsLoading:y}=V(),{collapsed:_}=Un(),b=os(),{features:g}=ie(),[P,S]=i.useState(null),w=Ne(P),C=i.useRef(null),[D,I]=i.useState(null),T=h._createdAt?"update":"create",L=i.useMemo(()=>p.find(Y=>Y.id===c)||p[0]||{type:"form"},[c,p]),M=g.splitPanes&&C.current||b.element,N=i.useMemo(()=>_?[(w==null?void 0:w.height)||0,0,n?n+2:2,0]:[0,0,2,0],[_,n,w]),R=L.type!=="form",z=i.useMemo(()=>L.type==="component"&&L.component&&i.createElement(L.component,{document:{draft:(u==null?void 0:u.draft)||null,displayed:l||h,historical:l,published:(u==null?void 0:u.published)||null},documentId:d,options:L.options,schemaType:m}),[L,l,d,u==null?void 0:u.draft,u==null?void 0:u.published,m,h]);i.useEffect(()=>{D!=null&&D.scrollTo&&D.scrollTo(0,0)},[d,D]),i.useEffect(()=>{M&&r(M)},[M,r]);const G=i.useMemo(()=>s?o(gr,{value:l||h}):null,[s,l,h]);return x(j,{direction:"column",flex:2,overflow:_?void 0:"hidden",children:[o(bo,{rootElement:a,ref:S}),o(_e,{children:o(vt,{element:M,__unstable_elements:{documentScrollElement:D},children:x(yt,{element:D,children:[L.type==="form"&&!y&&f&&x(F,{children:[o(yr,{granted:!!(v!=null&&v.granted),requiredPermission:T}),o(go,{})]}),x(Lr,{$disabled:_||!1,"data-testid":"document-panel-scroller",ref:I,children:[o(Cr,{hidden:R,margins:N},d+(f?"_ready":"_pending")),z]}),G,o("div",{"data-testid":"document-panel-portal",ref:C})]})})})]})},vo=["left","bottom"],jr={small:0,medium:1,large:2,full:"auto"};function zr(t){const{dialog:e,referenceElement:n}=t;return o(gt,{content:o(Br,{dialog:e}),fallbackPlacements:vo,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:n})}function Br(t){const{dialog:e}=t,{cancelButtonIcon:n,cancelButtonText:s,confirmButtonIcon:a,confirmButtonText:r,message:c,onCancel:l,onConfirm:d,tone:u}=e,{isTopLayer:h}=ao(),[p,f]=i.useState(null),m=i.useCallback(()=>{h&&l()},[h,l]),v=i.useCallback(y=>{y.key==="Escape"&&h&&l()},[h,l]);return Pt(m,[p]),xt(v),x(j,{direction:"column",ref:f,style:{minWidth:320-16,maxWidth:400},children:[o(k,{flex:1,overflow:"auto",padding:4,children:o(O,{children:c})}),o(k,{paddingX:4,paddingY:3,style:{borderTop:"1px solid var(--card-border-color)"},children:x(Fs,{columns:2,gap:2,children:[o(X,{icon:n,onClick:l,mode:"ghost",text:s||"Cancel"}),o(X,{icon:a,onClick:d,text:r||"Confirm",tone:u})]})})]})}function Nr(t){const{dialog:e}=t,n=i.useId(),s=e.footer&&o(k,{paddingX:4,paddingY:3,children:e.footer});return o(St,{zOffset:"fullscreen",children:o(wt,{__unstable_hideCloseButton:e.showCloseButton===!1,footer:s,header:e.header,id:n,onClose:e.onClose,onClickOutside:e.onClose,width:e.width===void 0?1:jr[e.width],portal:"documentPanelPortalElement",children:o(k,{padding:4,children:e.content})})})}function Wr(t){const{dialog:e,referenceElement:n}=t;return o(gt,{content:o(Fr,{dialog:e}),fallbackPlacements:vo,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:n})}function Fr(t){const{dialog:e}=t,{content:n,onClose:s}=e,{isTopLayer:a}=ao(),[r,c]=i.useState(null),l=i.useCallback(()=>{a&&s()},[a,s]),d=i.useCallback(u=>{u.key==="Escape"&&a&&s()},[a,s]);return Pt(l,[r]),xt(d),o("div",{ref:c,children:n})}function Ct(t){const{dialog:e,referenceElement:n=null}=t,s=i.useId();if(e.type==="confirm")return o(zr,{dialog:e,referenceElement:n});if(e.type==="popover")return o(Wr,{dialog:e,referenceElement:n});if(e.type==="dialog"||!e.type)return o(Nr,{dialog:e});const a=e;return console.warn("Unsupported modal type ".concat(a.type)),o(wt,{id:s,onClose:a.onClose,onClickOutside:a.onClose,width:2,children:o(k,{padding:4,children:a.content||x(F,{children:["Unexpected modal type (",o("code",{children:a.type}),")"]})})})}function Vr(t){const{actionStates:e,disabled:n}=t,s=i.useId(),a=i.useRef(null),[r,c]=i.useState(-1),[l,d]=i.useState(null),u=i.useCallback(f=>{c(f)},[]),h=i.useMemo(()=>({placement:"top-end",portal:!0,preventOverflow:!0}),[]),p=e[r];return x(F,{children:[o(Zn,{id:"".concat(s,"-action-menu"),button:o(X,{"data-testid":"action-menu-button","aria-label":"Open document actions",disabled:n,icon:Rs,mode:"ghost",ref:a}),menu:o(Qn,{padding:1,children:e.map((f,m)=>o(Ur,{actionState:f,disabled:n,index:m,onAction:u},m))}),popover:h,ref:d}),p&&p.dialog&&o(St,{zOffset:"paneFooter",children:o(Ct,{dialog:p.dialog,referenceElement:l})})]})}function Ur(t){const{actionState:e,disabled:n,index:s,onAction:a}=t,{onHandle:r}=e,c=i.useCallback(()=>{a(s),r&&r()},[s,a,r]),l=e.title&&o(k,{padding:2,children:o(O,{size:1,children:e.title})});return o(Os,{"data-testid":"action-".concat(e.label.replace(" ","")),disabled:n||!!e.disabled,onClick:c,padding:0,tone:e.tone,children:o(Te,{content:l,disabled:!l,fallbackPlacements:["left","bottom"],placement:"top",portal:!0,children:x(j,{align:"center",paddingX:3,children:[x(j,{flex:1,paddingY:3,children:[e.icon&&o(k,{marginRight:3,children:x(O,{children:[i.isValidElement(e.icon)&&e.icon,Ls.isValidElementType(e.icon)&&i.createElement(e.icon)]})}),o(O,{children:e.label})]}),e.shortcut&&o(k,{marginLeft:3,children:o(eo,{keys:String(e.shortcut).split("+").map(d=>d.slice(0,1).toUpperCase()+d.slice(1))})})]})})})}function yo(t){const{disabled:e,showMenu:n,states:s}=t,[a,...r]=s,[c,l]=i.useState(null),d=i.useMemo(()=>!a||!a.title&&!a.shortcut?null:x(j,{padding:2,style:{maxWidth:300},align:"center",children:[o(O,{size:1,children:a.title}),a.shortcut&&o(k,{marginLeft:a.title?2:0,children:o(eo,{keys:String(a.shortcut).split("+").map(u=>u.slice(0,1).toUpperCase()+u.slice(1).toLowerCase())})})]}),[a]);return x(j,{children:[a&&o(as,{zOffset:200,children:o(Te,{disabled:!d,content:d,portal:!0,placement:"top",children:o(J,{flex:1,children:o(X,{"data-testid":"action-".concat(a.label),disabled:e||!!a.disabled,icon:a.icon,onClick:a.onHandle,ref:l,text:a.label,tone:a.tone||"primary"})})})}),n&&r.length>0&&o(k,{marginLeft:1,children:o(Vr,{actionStates:r,disabled:e})}),a&&a.dialog&&o(Ct,{dialog:a.dialog,referenceElement:c})]})}const Hr=i.memo(function(){const{actions:e,connectionState:n,documentId:s,editState:a}=V();return!e||!a?null:o(_t,{actions:e,actionProps:a,children:r=>{let{states:c}=r;return o(yo,{disabled:n!=="connected",showMenu:e.length>1,states:c},s)}})}),Gr=i.memo(function(){const{connectionState:e,editState:n,timelineStore:s}=V(),a=H(s,u=>u.revTime),r=(a==null?void 0:a.id)||"",c=((n==null?void 0:n.draft)||(n==null?void 0:n.published)||{})._rev===r,l=i.useMemo(()=>({...n||{},revision:r}),[n,r]),d=i.useMemo(()=>[Ca],[]);return o(_t,{actions:d,actionProps:l,children:u=>{let{states:h}=u;return o(yo,{disabled:e!=="connected"||!!c,showMenu:!1,states:h})}})}),Kr={primary:"primary",success:"positive",warning:"caution",danger:"critical"};function $r(t){let{states:e}=t;return o(Fn,{space:1,children:e.map((n,s)=>o(Te,{content:n.title&&o(k,{padding:2,children:o(O,{size:1,children:n.title})}),disabled:!n.title,placement:"top",portal:!0,children:o(As,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:n.color?Kr[n.color]:void 0,style:{whiteSpace:"nowrap"},children:n.label})},String(s)))})}function Xr(){const{badges:t,editState:e}=V();return!e||!t?null:o(ti,{badges:t,badgeProps:e,children:n=>{let{states:s}=n;return o($r,{states:s})}})}const Yr=W(j)(gn||(gn=B([`
  cursor: default;
`])));function qr(t){const{collapsed:e,disabled:n,lastPublished:s,lastUpdated:a,liveEdit:r}=t,c=me(s||"",{minimal:!0,agoSuffix:!0}),l=me(s||"",{minimal:!0}),d=me(a||"",{minimal:!0,agoSuffix:!0}),u=me(a||"",{minimal:!0});return o(Yr,{align:"center","data-ui":"SessionLayout",sizing:"border",children:o(Te,{placement:"top",portal:!0,content:o(J,{padding:3,space:3,children:o(O,{size:1,muted:!0,children:r?x(F,{children:["Last updated ",a?d:c]}):x(F,{children:["Last published ",c]})})}),children:o(X,{mode:"bleed",tone:r?"critical":"positive",tabIndex:-1,disabled:n,children:x(j,{align:"center",children:[o(k,{marginRight:e?0:3,children:o(O,{size:2,children:r?o(ss,{}):o(to,{})})}),!e&&o(O,{size:1,weight:"medium",children:r?o(F,{children:a?u:l}):l})]})})})})}const Jr=W(ke.path)(bn||(bn=B([`
  transform-origin: center;
`]))),Zr=t=>o(ke.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...t}),Qr=t=>o(Jr,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...t}),ec=t=>o(ke.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...t}),tc=t=>o(ke.path,{d:"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z",...t}),nc=Ia(vn||(vn=B([`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`]))),oc=W.g(yn||(yn=B([`
  transform-origin: center;

  &[data-rotate] {
    animation: `,` 1s ease-in-out infinite;
  }
`])),nc),ac={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},sc={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},ic={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},rc={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}},cc={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:0,transition:{duration:0}},changes:{pathLength:1,transition:{duration:.4,delay:.5}}};function lc(t){const{status:e}=t;return e?o("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"",children:x(ke.g,{variants:ac,initial:e,animate:e,children:[x(oc,{"data-rotate":e==="changes"?void 0:"",children:[o(Qr,{variants:ic,initial:e,animate:e}),o(Zr,{variants:sc,initial:e,animate:e})]}),o(ec,{variants:rc,initial:e,animate:e}),o(tc,{variants:cc,initial:e,animate:e})]})}):null}const dc=fe.forwardRef(function(e,n){const{collapsed:s,status:a,lastUpdated:r,...c}=e,l=me(r||"",{minimal:!0}),d=me(r||"",{minimal:!0,agoSuffix:!0}),u=i.useMemo(()=>a==="syncing"?{text:"Saving...",tone:void 0}:a==="changes"?{text:l,tone:"caution"}:a==="saved"?{text:"Saved!",tone:"positive"}:{},[a,l]);return a?o(Te,{placement:"top",portal:!0,disabled:a!=="changes",content:x(J,{padding:3,space:3,children:[o(O,{size:1,weight:"semibold",children:"Review changes"}),x(O,{size:1,muted:!0,children:["Changes saved ",d]})]}),children:o(X,{mode:"bleed",justify:"flex-start",tone:u==null?void 0:u.tone,...c,"data-testid":"review-changes-button",ref:n,children:x(j,{align:"center",children:[o(k,{marginRight:s?0:3,children:o(O,{children:o(lc,{status:a})})}),!s&&o(O,{size:1,weight:"medium",children:u==null?void 0:u.text})]})})}):null}),uc=fe.memo(dc),pc=1e3,hc=3e3,mc=i.memo(function(){var e;const{changesOpen:n,documentId:s,documentType:a,editState:r,onHistoryClose:c,onHistoryOpen:l,timelineStore:d,value:u}=V(),h=Ea(s,a),p=u==null?void 0:u._updatedAt,f=(e=r==null?void 0:r.published)==null?void 0:e._updatedAt,m=!!(r!=null&&r.liveEdit),v=!!(r!=null&&r.published),y=!!(r!=null&&r.draft),[_,b]=i.useState(null),g=Ne(_),P=!g||(g==null?void 0:g.width)<300,[S,w]=i.useState(null),C=H(d,T=>T.onOlderRevision);i.useEffect(()=>{if(S==="syncing"&&!h.isSyncing){const T=setTimeout(()=>w("saved"),pc);return()=>clearTimeout(T)}if(S==="saved"){const T=setTimeout(()=>w(null),hc);return()=>clearTimeout(T)}},[S,p,h.isSyncing]),i.useLayoutEffect(()=>{w(null)},[s]),i.useLayoutEffect(()=>{h.isSyncing&&w("syncing")},[h.isSyncing,p]);const D=i.useMemo(()=>o(uc,{lastUpdated:p,status:S||(y?"changes":void 0),onClick:n?c:l,disabled:C,selected:n,collapsed:P}),[y,n,c,l,p,C,S,P]),I=i.useMemo(()=>(m||v)&&o(k,{marginRight:1,children:o(qr,{disabled:C,lastPublished:f,lastUpdated:p,liveEdit:m,collapsed:P})}),[P,f,p,m,v,C]);return x(j,{align:"center","data-ui":"DocumentSparkline",ref:b,children:[I,x(j,{align:"center",flex:1,children:[D,!P&&o(k,{marginLeft:3,children:o(Xr,{})})]})]})}),fc=W(k)(Pn||(Pn=B([`
  min-width: 10em;
  max-width: 16em;
`])));function gc(t){const{actionsBoxRef:e}=t,{badges:n,timelineStore:s}=V(),a=H(s,r=>r.onOlderRevision);return i.useMemo(()=>o(k,{paddingLeft:2,paddingRight:[2,3],paddingY:2,children:x(j,{align:"center",children:[o(k,{flex:[1,2],children:n&&o(mc,{})}),o(fc,{flex:1,marginLeft:[1,3],ref:e,children:a?o(Gr,{}):o(Hr,{})})]})}),[e,n,a])}function bc(t){const{actionsBoxElement:e,activeIndex:n,children:s,id:a,onActionStart:r,onKeyDown:c,rootRef:l,states:d,...u}=t,h=d[n],p=i.useCallback(f=>{const m=d.filter(y=>y.shortcut&&ft(y.shortcut,f)),v=m[0];if(m.length>1&&console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut "'.concat(v.shortcut,'"')),v&&!v.disabled&&v.onHandle){f.preventDefault(),v.onHandle(),r(d.indexOf(v));return}c&&c(f)},[r,c,d]);return x(je,{id:a,onKeyDown:p,tabIndex:-1,...u,ref:l,children:[s,h&&h.dialog&&o(St,{zOffset:"paneFooter",children:o(Ct,{dialog:h.dialog,referenceElement:e})})]})}const Po=fe.memo(t=>{const{actionsBoxElement:e,children:n,...s}=t,{actions:a,editState:r}=V(),[c,l]=i.useState(-1),d=i.useCallback(h=>{l(h)},[]),u=i.useMemo(()=>r&&{...r,onComplete:()=>{},revision:void 0},[r]);return!u||!a?null:o(_t,{actionProps:u,actions:a,children:h=>{let{states:p}=h;return o(bc,{...s,activeIndex:c,actionsBoxElement:e,onActionStart:d,states:p,children:n})}})});Po.displayName="DocumentActionShortcuts";const Dn=320,Mn=600,Rn=320,On=["fixed","absolute"],vc=W(ka)(xn||(xn=B([`
  flex: 1;
  display: flex;
  min-height: 0;
  min-width: 0;
`]))),Dc=i.memo(function(e){const{name:n}=ze();return o(Vn,{name:e.pane.source||n,children:o(yc,{...e})})});function yc(t){var e;const{pane:n,paneKey:s}=t,{resolveNewDocumentOptions:a}=ze().document,r=Ie(),c=Pc(n.options,r.params),{documentType:l,isLoaded:d}=Ta(c.id,c.type),u=i.useMemo(()=>a({type:"global"}),[a]),[h,p]=Da({templateItems:u}),f=d&&!p,m=i.useMemo(()=>f&&l&&c.type!==l?xc(t,c,l):t,[t,l,f,c]),{ReferenceChildLink:v,handleEditReference:y,groupIndex:_,routerPanesState:b}=r,g=((e=b[_+1])==null?void 0:e[0].params)||{},P=b.length,{parentRefPath:S}=g,w=i.useMemo(()=>S?{path:xe(S),state:_>=P-1?"none":_>=P-2?"selected":"pressed"}:{path:[],state:"none"},[S,_,P]);return c.type==="*"&&!f?o(we,{flex:2.5,minWidth:320,paneKey:s,title:"Loading document…"}):l?o(uo,{...m,children:o(Ma,{EditReferenceLinkComponent:v,onEditReference:y,initialValueTemplateItems:h,activePath:w,children:o(Sc,{})})},"".concat(l,"-").concat(c.id)):o(lo,{flex:2.5,minWidth:320,paneKey:s,title:o(F,{children:"The document was not found"}),children:o(J,{space:4,children:x(O,{as:"p",children:["The document type is not defined, and a document with the ",o("code",{children:c.id})," ","identifier could not be found."]})})})}function Pc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=zn();return i.useMemo(()=>{if(t.type&&t.type!=="*")return t;const s=t.template||e.template,a=s?n.find(c=>c.id===s):void 0,r=a==null?void 0:a.schemaType;return r?{...t,type:r}:t},[t,e.template,n])}function xc(t,e,n){return{...t,pane:{...t.pane,options:{...e,type:n}}}}function Sc(){const{changesOpen:t,documentType:e,onFocus:n,onPathOpen:s,onHistoryOpen:a,onKeyUp:r,inspectOpen:c,paneKey:l,schemaType:d,value:u}=V(),{features:h}=ie(),{collapsed:p}=Un(),f=Ra(),[m,v]=i.useState(null),[y,_]=i.useState(null),[b,g]=i.useState(null),[P,S]=i.useState(null),w=Ne(y),C=w==null?void 0:w.height,D=i.useMemo(()=>o(Ar,{footerHeight:C||null,isInspectOpen:c,rootElement:m,setDocumentPanelPortalElement:S}),[C,m,c]),I=i.useMemo(()=>o(vt,{__unstable_elements:{documentPanelPortalElement:P},children:o(Ht,{position:On,zOffset:f.portal,children:o(Oa,{ref:_,children:o(gc,{actionsBoxRef:g})})})}),[P,f.portal]),T=i.useMemo(()=>!h.reviewChanges||!t?null:o(yt,{element:m,children:o(rr,{})}),[t,h.reviewChanges,m]),L=i.useCallback(z=>{s(z),n(z)},[s,n]),M=i.useMemo(()=>d?x(F,{children:[o(Ht,{position:On,zOffset:f.portal,children:o(j,{direction:"column",flex:1,height:p?void 0:"fill",children:x(vc,{"data-testid":"change-connector-root",isReviewChangesOpen:t,onOpenReviewChanges:a,onSetFocus:L,children:[D,T]})})}),I,o(Li,{})]}):o(lo,{flex:2.5,minWidth:320,paneKey:l,title:x(F,{children:["Unknown document type: ",o("code",{children:e})]}),tone:"caution",children:x(J,{space:4,children:[e&&x(O,{as:"p",children:["This document has the schema type ",o("code",{children:e}),", which is not defined as a type in the local content studio schema."]}),!e&&o(O,{as:"p",children:"This document does not exist, and no schema type was specified for it."}),La]})}),[d,f.portal,p,t,a,L,D,T,I,l,e,u]),N=t?Mn+Rn:Mn,R=t?Dn+Rn:Dn;return o(Po,{actionsBoxElement:b,currentMinWidth:N,"data-testid":"document-pane",flex:2.5,id:l,minWidth:R,onKeyUp:r,rootRef:v,children:M})}function wc(){return o(ne,{height:"fill",children:o(j,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:o(Ee,{width:0,children:o(ne,{padding:4,radius:2,shadow:1,tone:"caution",children:x(j,{children:[o(k,{children:o(O,{size:1,children:o(bt,{})})}),x(J,{flex:1,marginLeft:3,space:3,children:[o(O,{as:"h1",size:1,weight:"bold",children:"No document types"}),o(O,{as:"p",muted:!0,size:1,children:"Please define at least one document type in your schema."}),o(O,{as:"p",muted:!0,size:1,children:o("a",{href:"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio",target:"_blank",rel:"noreferrer",children:"Learn how to add a document type →"})})]})]})})})})})}const _c=W(ci)(Sn||(Sn=B([`
  min-height: 100%;
  min-width: 320px;
`]))),Cc=ft("mod+s"),Ic=i.memo(function(e){let{onPaneChange:n}=e;var s;const{push:a}=Ce(),r=jn(),{layoutCollapsed:c,setLayoutCollapsed:l}=ie(),{paneDataItems:d,resolvedPanes:u}=vi(),h=ht(i.useCallback(_=>typeof _.intent=="string",[])),[p,f]=i.useState(null),m=i.useCallback(()=>l(!0),[l]),v=i.useCallback(()=>l(!1),[l]);return i.useEffect(()=>{u.length&&n(u)},[n,u]),i.useEffect(()=>{const _=b=>{Cc(b)&&(b.preventDefault(),a({closable:!0,id:"auto-save-message",status:"info",title:"Your work is automatically saved!",duration:4e3}))};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[a]),((s=r._original)==null?void 0:s.types.some(Aa))?x(vt,{element:p||null,children:[x(_c,{flex:1,height:c?void 0:"fill",minWidth:512,onCollapse:m,onExpand:v,children:[d.map(_=>{let{active:b,childItemId:g,groupIndex:P,itemId:S,key:w,pane:C,index:D,params:I,path:T,payload:L,siblingIndex:M,selected:N}=_;return o(i.Fragment,{children:C===st?o(we,{paneKey:w,path:T,selected:N}):o(Di,{active:b,groupIndex:P,index:D,pane:C,childItemId:g,itemId:S,paneKey:w,params:I,payload:L,path:T,selected:N,siblingIndex:M})},"".concat(C===st?"loading":C.type,"-").concat(D))}),d.length<=1&&h&&o(we,{paneKey:"intent-resolver"})]}),o("div",{"data-portal":"",ref:f})]}):o(wc,{})});function Ec(t){let{tool:{options:e}}=t;const{unstable_sources:n}=is(),[s]=n,{source:a,defaultDocumentNode:r,structure:c}=e||{};i.useEffect(()=>(Ze([]),()=>Ze([])),[]);const[{error:l},d]=i.useState({error:null});return l?o(_i,{error:l}):o(rs,{onCatch:d,children:o(Vn,{name:a||s.name,children:x(cs,{defaultDocumentNode:r,structure:c,children:[o(Ic,{onPaneChange:Ze}),o(xi,{})]})})})}var Mc=Object.freeze({__proto__:null,default:Ec});export{io as Delay,Dc as DocumentPane,uo as DocumentPaneProvider,Mc as index,ie as useDeskTool,lr as useDeskToolSetting};
